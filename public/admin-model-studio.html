<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø§Ø³ØªÙˆØ¯ÛŒÙˆ ØªÙˆÙ„ÛŒØ¯ Ù…Ø¯Ù„ | Ù…Ø¯ÛŒØ±ÛŒØª</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/admin-style.css">
    <style>
        .studio-container {
            max-width: 1400px;
            margin: 0 auto;
        }
        .studio-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 3px;
            border-radius: 15px;
            margin-bottom: 30px;
        }
        .studio-card-inner {
            background: white;
            padding: 30px;
            border-radius: 13px;
        }
        .studio-section {
            margin-bottom: 20px;
            background: #f8f9ff;
            padding: 20px;
            border-radius: 12px;
        }
        .studio-section summary {
            font-weight: 700;
            font-size: 16px;
            cursor: pointer;
            padding: 5px;
            margin-bottom: 15px;
        }
        .param-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 15px;
        }
        @media (max-width: 1024px) {
            .param-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        @media (max-width: 640px) {
            .param-grid {
                grid-template-columns: 1fr;
            }
        }
        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 6px;
            color: #374151;
            font-size: 14px;
        }
        .form-group select,
        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            font-family: 'Inter', sans-serif;
            transition: all 0.2s;
        }
        .form-group select:focus,
        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        .btn-generate {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 17px;
            font-weight: 700;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .btn-generate:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }
        .btn-generate:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        .preview-container {
            background: #f8f9ff;
            padding: 25px;
            border-radius: 15px;
            border: 3px solid #667eea;
        }
        .preview-image {
            width: 100%;
            max-width: 600px;
            border-radius: 12px;
            display: block;
            margin: 0 auto 20px;
        }
    </style>
</head>
<body>
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
                    <circle cx="20" cy="20" r="18" fill="white" opacity="0.2"/>
                </svg>
                <span>Admin Panel</span>
            </div>
        </div>
        <nav class="sidebar-nav">
            <a href="/admin/dashboard" class="nav-item"><span>Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</span></a>
            <a href="/admin/users" class="nav-item"><span>Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</span></a>
            <a href="/admin/content" class="nav-item"><span>Ù…Ø­ØªÙˆØ§</span></a>
            <a href="/admin/user-content" class="nav-item"><span>Ù…Ø­ØªÙˆØ§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</span></a>
            <a href="/admin/model-studio" class="nav-item active"><span>Ø§Ø³ØªÙˆØ¯ÛŒÙˆ Ù…Ø¯Ù„</span></a>
            <a href="/admin/background-studio" class="nav-item"><span>Ø§Ø³ØªÙˆØ¯ÛŒÙˆ Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡</span></a>
            <a href="/admin/analytics" class="nav-item"><span>Ø¢Ù…Ø§Ø±</span></a>
        </nav>
        <div class="sidebar-footer">
            <button class="btn-logout" onclick="handleLogout()"><span>Logout</span></button>
        </div>
    </aside>

    <main class="main-content">
        <header class="page-header">
            <div>
                <h1>ğŸ¨ Ø§Ø³ØªÙˆØ¯ÛŒÙˆ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ ØªÙˆÙ„ÛŒØ¯ Ù…Ø¯Ù„</h1>
                <p>Ø³Ø§Ø®Øª Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ Ø¨Ø§ Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§ÛŒ Ø¯Ù‚ÛŒÙ‚ Ø¸Ø§Ù‡Ø±ÛŒ</p>
            </div>
        </header>

        <div class="studio-container">
            <!-- User Selection -->
            <div class="content-section">
                <h2>Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±</h2>
                <select id="selectedUser" onchange="handleUserSelect()" class="form-control" style="font-size: 15px; padding: 12px;">
                    <option value="">-- Ú©Ø§Ø±Ø¨Ø± Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ø³Ø§Ø®Øª Ù…Ø¯Ù„ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ --</option>
                </select>
            </div>

            <!-- Model Studio -->
            <div class="studio-card">
                <div class="studio-card-inner">

                    <!-- Basic Info -->
                    <details open class="studio-section" style="background: #f0f9ff;">
                        <summary style="color: #0369a1;">ğŸ“‹ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø§ÛŒÙ‡</summary>
                        <div class="param-grid">
                            <div class="form-group">
                                <label>Ø¬Ù†Ø³ÛŒØª</label>
                                <select id="modelGender">
                                    <option value="female">ğŸ‘© Ø²Ù†</option>
                                    <option value="male">ğŸ‘¨ Ù…Ø±Ø¯</option>
                                    <option value="non-binary">âš§ ØºÛŒØ± Ø¯ÙˆØ¬Ù†Ø³ÛŒØªÛŒ</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ø³Ù†ÛŒ</label>
                                <select id="modelAge">
                                    <option value="child">ğŸ‘¶ Ú©ÙˆØ¯Ú© (5-12)</option>
                                    <option value="teen">ğŸ§’ Ù†ÙˆØ¬ÙˆØ§Ù† (13-17)</option>
                                    <option value="young-adult" selected>ğŸ‘¤ Ø¬ÙˆØ§Ù† (18-25)</option>
                                    <option value="adult">ğŸ§‘ Ø¨Ø²Ø±Ú¯Ø³Ø§Ù„ (26-40)</option>
                                    <option value="middle-aged">ğŸ‘¨â€ğŸ¦³ Ù…ÛŒØ§Ù†Ø³Ø§Ù„ (41-60)</option>
                                    <option value="elderly">ğŸ‘´ Ø³Ø§Ù„Ù…Ù†Ø¯ (60+)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Ù‚ÙˆÙ…ÛŒØª</label>
                                <select id="modelEthnicity">
                                    <option value="caucasian">ğŸŒ Ù‚ÙÙ‚Ø§Ø²ÛŒ</option>
                                    <option value="african">ğŸŒ Ø¢ÙØ±ÛŒÙ‚Ø§ÛŒÛŒ</option>
                                    <option value="asian">ğŸŒ Ø¢Ø³ÛŒØ§ÛŒÛŒ</option>
                                    <option value="hispanic">ğŸŒ Ù‡ÛŒØ³Ù¾Ø§Ù†ÛŒÚ©</option>
                                    <option value="middle-eastern">ğŸŒ Ø®Ø§ÙˆØ±Ù…ÛŒØ§Ù†Ù‡â€ŒØ§ÛŒ</option>
                                    <option value="mixed">ğŸŒ ØªØ±Ú©ÛŒØ¨ÛŒ</option>
                                </select>
                            </div>
                        </div>
                    </details>

                    <!-- Face Features -->
                    <details open class="studio-section" style="background: #fff5f5;">
                        <summary style="color: #e53e3e;">ğŸ˜Š ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ ØµÙˆØ±Øª</summary>
                        <div class="param-grid">
                            <div class="form-group">
                                <label>Ø´Ú©Ù„ ØµÙˆØ±Øª</label>
                                <select id="faceShape">
                                    <option value="oval" selected>Ø¨ÛŒØ¶ÛŒ</option>
                                    <option value="round">Ú¯Ø±Ø¯</option>
                                    <option value="square">Ù…Ø±Ø¨Ø¹ÛŒ</option>
                                    <option value="heart">Ù‚Ù„Ø¨ÛŒ</option>
                                    <option value="diamond">Ø§Ù„Ù…Ø§Ø³ÛŒ</option>
                                    <option value="long">Ø¯Ø±Ø§Ø²</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Ø±Ù†Ú¯ Ú†Ø´Ù…</label>
                                <select id="eyeColor">
                                    <option value="brown">Ù‚Ù‡ÙˆÙ‡â€ŒØ§ÛŒ</option>
                                    <option value="blue">Ø¢Ø¨ÛŒ</option>
                                    <option value="green">Ø³Ø¨Ø²</option>
                                    <option value="hazel">Ø¹Ø³Ù„ÛŒ</option>
                                    <option value="gray">Ø®Ø§Ú©Ø³ØªØ±ÛŒ</option>
                                    <option value="amber">Ú©Ù‡Ø±Ø¨Ø§ÛŒÛŒ</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Ø´Ú©Ù„ Ú†Ø´Ù…</label>
                                <select id="eyeShape">
                                    <option value="almond" selected>Ø¨Ø§Ø¯Ø§Ù…ÛŒ</option>
                                    <option value="round">Ú¯Ø±Ø¯</option>
                                    <option value="hooded">Ù¾ÙˆØ´ÛŒØ¯Ù‡</option>
                                    <option value="upturned">Ú¯ÙˆØ´Ù‡ Ø¨Ø§Ù„Ø§</option>
                                    <option value="downturned">Ú¯ÙˆØ´Ù‡ Ù¾Ø§ÛŒÛŒÙ†</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Ø§Ø¨Ø±Ùˆ</label>
                                <select id="eyebrows">
                                    <option value="natural">Ø·Ø¨ÛŒØ¹ÛŒ</option>
                                    <option value="thick">Ø¶Ø®ÛŒÙ…</option>
                                    <option value="thin">Ù†Ø§Ø²Ú©</option>
                                    <option value="arched">Ú©Ù…Ø§Ù†ÛŒ</option>
                                    <option value="straight">Ù…Ø³ØªÙ‚ÛŒÙ…</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Ù†ÙˆØ¹ Ø¨ÛŒÙ†ÛŒ</label>
                                <select id="noseType">
                                    <option value="straight">Ù…Ø³ØªÙ‚ÛŒÙ…</option>
                                    <option value="button">Ø¯Ú©Ù…Ù‡â€ŒØ§ÛŒ</option>
                                    <option value="roman">Ø±ÙˆÙ…ÛŒ</option>
                                    <option value="greek">ÛŒÙˆÙ†Ø§Ù†ÛŒ</option>
                                    <option value="upturned">Ø¨Ø§Ù„Ø§ Ø±ÙØªÙ‡</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Ù¾Ø±ÛŒ Ù„Ø¨</label>
                                <select id="lipFullness">
                                    <option value="thin">Ù†Ø§Ø²Ú©</option>
                                    <option value="medium" selected>Ù…ØªÙˆØ³Ø·</option>
                                    <option value="full">Ù¾Ø±</option>
                                    <option value="very-full">Ø®ÛŒÙ„ÛŒ Ù¾Ø±</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Ø§Ø³ØªØ®ÙˆØ§Ù† Ú¯ÙˆÙ†Ù‡</label>
                                <select id="cheekbones">
                                    <option value="subtle">Ù…Ù„Ø§ÛŒÙ…</option>
                                    <option value="defined" selected>Ù…Ø´Ø®Øµ</option>
                                    <option value="high">Ø¨Ø±Ø¬Ø³ØªÙ‡ Ùˆ Ø¨Ø§Ù„Ø§</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Ø®Ø· ÙÚ©</label>
                                <select id="jawline">
                                    <option value="soft">Ù†Ø±Ù…</option>
                                    <option value="defined" selected>Ù…Ø´Ø®Øµ</option>
                                    <option value="sharp">ØªÛŒØ²</option>
                                    <option value="square">Ù…Ø±Ø¨Ø¹ÛŒ</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Ú†Ø§Ù†Ù‡</label>
                                <select id="chin">
                                    <option value="rounded">Ú¯Ø±Ø¯</option>
                                    <option value="pointed">Ù†ÙˆÚ© ØªÛŒØ²</option>
                                    <option value="square">Ù…Ø±Ø¨Ø¹ÛŒ</option>
                                    <option value="cleft">Ø´Ú©Ø§Ù Ø¯Ø§Ø±</option>
                                </select>
                            </div>
                        </div>
                    </details>

                    <!-- Hair Style -->
                    <details open class="studio-section" style="background: #fffbeb;">
                        <summary style="color: #d97706;">ğŸ’‡ Ù…Ùˆ Ùˆ Ø§Ø³ØªØ§ÛŒÙ„</summary>
                        <div class="param-grid">
                            <div class="form-group">
                                <label>Ø±Ù†Ú¯ Ù…Ùˆ</label>
                                <select id="hairColor">
                                    <option value="black">Ù…Ø´Ú©ÛŒ</option>
                                    <option value="dark-brown">Ù‚Ù‡ÙˆÙ‡â€ŒØ§ÛŒ ØªÛŒØ±Ù‡</option>
                                    <option value="light-brown">Ù‚Ù‡ÙˆÙ‡â€ŒØ§ÛŒ Ø±ÙˆØ´Ù†</option>
                                    <option value="blonde">Ø¨Ù„ÙˆÙ†Ø¯</option>
                                    <option value="platinum">Ø¨Ù„ÙˆÙ†Ø¯ Ù¾Ù„Ø§ØªÛŒÙ†ÛŒ</option>
                                    <option value="red">Ù‚Ø±Ù…Ø²</option>
                                    <option value="auburn">Ù‚Ø±Ù…Ø² Ù…Ø§ÛŒÙ„ Ø¨Ù‡ Ù‚Ù‡ÙˆÙ‡â€ŒØ§ÛŒ</option>
                                    <option value="gray">Ø®Ø§Ú©Ø³ØªØ±ÛŒ</option>
                                    <option value="white">Ø³ÙÛŒØ¯</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Ø·ÙˆÙ„ Ù…Ùˆ</label>
                                <select id="hairLength">
                                    <option value="bald">Ø¨Ø¯ÙˆÙ† Ù…Ùˆ</option>
                                    <option value="very-short">Ø®ÛŒÙ„ÛŒ Ú©ÙˆØªØ§Ù‡</option>
                                    <option value="short">Ú©ÙˆØªØ§Ù‡</option>
                                    <option value="medium">Ù…ØªÙˆØ³Ø·</option>
                                    <option value="long" selected>Ø¨Ù„Ù†Ø¯</option>
                                    <option value="very-long">Ø®ÛŒÙ„ÛŒ Ø¨Ù„Ù†Ø¯</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Ø¨Ø§ÙØª Ù…Ùˆ</label>
                                <select id="hairTexture">
                                    <option value="straight" selected>ØµØ§Ù</option>
                                    <option value="wavy">Ù…ÙˆØ¬ Ø¯Ø§Ø±</option>
                                    <option value="curly">ÙØ±</option>
                                    <option value="coily">ÙØ± Ù¾ÛŒÚ†ÛŒØ¯Ù‡</option>
                                    <option value="kinky">ÙØ± Ø®ÛŒÙ„ÛŒ Ø±ÛŒØ²</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Ù…Ø¯Ù„ Ù…Ùˆ</label>
                                <select id="hairstyle">
                                    <option value="loose" selected>Ø¢Ø²Ø§Ø¯ Ùˆ Ø·Ø¨ÛŒØ¹ÛŒ</option>
                                    <option value="ponytail">Ø¯Ù… Ø§Ø³Ø¨ÛŒ</option>
                                    <option value="bun">Ú¯ÙˆØ¬Ù‡</option>
                                    <option value="braids">Ø¨Ø§ÙØªÙ‡</option>
                                    <option value="updo">Ø´ÛŒÙ†ÛŒÙˆÙ†</option>
                                    <option value="bob">Ú©ÙˆØªØ§Ù‡ Ø¨Ø§Ø¨</option>
                                    <option value="pixie">Ú©ÙˆØªØ§Ù‡ Ù¾ÛŒÚ©Ø³ÛŒ</option>
                                    <option value="slicked-back">Ú†Ø³Ø¨ÛŒØ¯Ù‡ Ø¨Ù‡ Ø¹Ù‚Ø¨</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Ù…ÙˆÛŒ ØµÙˆØ±Øª (Ù…Ø±Ø¯Ø§Ù†Ù‡)</label>
                                <select id="facialHair">
                                    <option value="none" selected>Ù†Ø¯Ø§Ø±Ø¯</option>
                                    <option value="stubble">ØªÙ‡ Ø±ÛŒØ´ Ø³Ø¨Ú©</option>
                                    <option value="beard">Ø±ÛŒØ´ Ú©Ø§Ù…Ù„</option>
                                    <option value="goatee">Ø±ÛŒØ´ Ø¨Ø²ÛŒ</option>
                                    <option value="mustache">Ø³Ø¨ÛŒÙ„</option>
                                </select>
                            </div>
                        </div>
                    </details>

                    <!-- Skin & Body -->
                    <details open class="studio-section" style="background: #f0fdf4;">
                        <summary style="color: #16a34a;">ğŸ¨ Ù¾ÙˆØ³Øª Ùˆ Ù†ÙˆØ¹ Ø¨Ø¯Ù†</summary>
                        <div class="param-grid">
                            <div class="form-group">
                                <label>Ø±Ù†Ú¯ Ù¾ÙˆØ³Øª</label>
                                <select id="skinTone">
                                    <option value="very-fair">Ø¨Ø³ÛŒØ§Ø± Ø±ÙˆØ´Ù†</option>
                                    <option value="fair">Ø±ÙˆØ´Ù†</option>
                                    <option value="medium" selected>Ù…ØªÙˆØ³Ø·</option>
                                    <option value="olive">Ø²ÛŒØªÙˆÙ†ÛŒ</option>
                                    <option value="tan">Ø¨Ø±Ù†Ø²Ù‡</option>
                                    <option value="brown">Ù‚Ù‡ÙˆÙ‡â€ŒØ§ÛŒ</option>
                                    <option value="dark-brown">Ù‚Ù‡ÙˆÙ‡â€ŒØ§ÛŒ ØªÛŒØ±Ù‡</option>
                                    <option value="deep">ØªÛŒØ±Ù‡</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Ø¨Ø§ÙØª Ù¾ÙˆØ³Øª</label>
                                <select id="skinTexture">
                                    <option value="smooth" selected>ØµØ§Ù Ùˆ Ø¨ÛŒâ€ŒØ¹ÛŒØ¨</option>
                                    <option value="natural">Ø·Ø¨ÛŒØ¹ÛŒ</option>
                                    <option value="freckled">Ú©Ú© Ùˆ Ù…Ú© Ø¯Ø§Ø±</option>
                                    <option value="with-beauty-marks">Ø¨Ø§ Ø®Ø§Ù„ Ø²ÛŒØ¨Ø§ÛŒÛŒ</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Ù†ÙˆØ¹ Ø¨Ø¯Ù†</label>
                                <select id="bodyType">
                                    <option value="slim">Ù„Ø§ØºØ±</option>
                                    <option value="athletic" selected>ÙˆØ±Ø²Ø´Ú©Ø§Ø±ÛŒ</option>
                                    <option value="average">Ù…ØªÙˆØ³Ø·</option>
                                    <option value="curvy">Ø®ÙˆØ´ Ø§Ù†Ø¯Ø§Ù…</option>
                                    <option value="plus-size">Ø³Ø§ÛŒØ² Ø¨Ø²Ø±Ú¯</option>
                                    <option value="muscular">Ø¹Ø¶Ù„Ø§Ù†ÛŒ</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Ù‚Ø¯</label>
                                <select id="height">
                                    <option value="petite">Ú©ÙˆØªØ§Ù‡ (Ø²ÛŒØ± 163 Ø³Ø§Ù†ØªÛŒ)</option>
                                    <option value="average" selected>Ù…ØªÙˆØ³Ø· (163-173 Ø³Ø§Ù†ØªÛŒ)</option>
                                    <option value="tall">Ø¨Ù„Ù†Ø¯ (173-183 Ø³Ø§Ù†ØªÛŒ)</option>
                                    <option value="very-tall">Ø®ÛŒÙ„ÛŒ Ø¨Ù„Ù†Ø¯ (Ø¨Ø§Ù„Ø§ÛŒ 183 Ø³Ø§Ù†ØªÛŒ)</option>
                                </select>
                            </div>
                        </div>
                    </details>

                    <!-- Expression & Pose -->
                    <details open class="studio-section" style="background: #fef2f2;">
                        <summary style="color: #dc2626;">ğŸ˜ƒ Ø­Ø§Ù„Øª Ùˆ Ú˜Ø³Øª</summary>
                        <div class="param-grid">
                            <div class="form-group">
                                <label>Ø­Ø§Ù„Øª Ú†Ù‡Ø±Ù‡</label>
                                <select id="expression">
                                    <option value="neutral-confident" selected>Ø®Ù†Ø«ÛŒ Ùˆ Ø¨Ø§ Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¨Ù‡ Ù†ÙØ³</option>
                                    <option value="smiling">Ù„Ø¨Ø®Ù†Ø¯</option>
                                    <option value="laughing">Ø®Ù†Ø¯Ø§Ù†</option>
                                    <option value="serious">Ø¬Ø¯ÛŒ</option>
                                    <option value="mysterious">Ù…Ø±Ù…ÙˆØ²</option>
                                    <option value="seductive">ÙØ±ÛŒØ¨Ù†Ø¯Ù‡</option>
                                    <option value="friendly">Ø¯ÙˆØ³ØªØ§Ù†Ù‡</option>
                                    <option value="fierce">Ù‚Ø§Ø·Ø¹</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Ú˜Ø³Øª</label>
                                <select id="modelPose">
                                    <option value="standing-front" selected>Ø§ÛŒØ³ØªØ§Ø¯Ù‡ Ø±Ùˆ Ø¨Ù‡ Ø¬Ù„Ùˆ</option>
                                    <option value="standing-side">Ø§ÛŒØ³ØªØ§Ø¯Ù‡ Ù†ÛŒÙ…Ø±Ø®</option>
                                    <option value="walking">Ø¯Ø± Ø­Ø§Ù„ Ø±Ø§Ù‡ Ø±ÙØªÙ†</option>
                                    <option value="sitting">Ù†Ø´Ø³ØªÙ‡</option>
                                    <option value="leaning">ØªÚ©ÛŒÙ‡ Ø¯Ø§Ø¯Ù‡</option>
                                    <option value="hands-on-hips">Ø¯Ø³Øª Ø¨Ù‡ Ú©Ù…Ø±</option>
                                    <option value="crossed-arms">Ø¯Ø³Øª Ø¨Ù‡ Ø³ÛŒÙ†Ù‡</option>
                                    <option value="dynamic">Ú˜Ø³Øª Ù¾ÙˆÛŒØ§</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Ø²Ø§ÙˆÛŒÙ‡ Ø³Ø±</label>
                                <select id="headAngle">
                                    <option value="straight" selected>Ù…Ø³ØªÙ‚ÛŒÙ…</option>
                                    <option value="tilted-left">Ú©Ø¬ Ø¨Ù‡ Ú†Ù¾</option>
                                    <option value="tilted-right">Ú©Ø¬ Ø¨Ù‡ Ø±Ø§Ø³Øª</option>
                                    <option value="looking-up">Ù†Ú¯Ø§Ù‡ Ø¨Ù‡ Ø¨Ø§Ù„Ø§</option>
                                    <option value="looking-down">Ù†Ú¯Ø§Ù‡ Ø¨Ù‡ Ù¾Ø§ÛŒÛŒÙ†</option>
                                </select>
                            </div>
                        </div>
                    </details>

                    <!-- Photography Settings -->
                    <details open class="studio-section" style="background: #ede9fe;">
                        <summary style="color: #7c3aed;">ğŸ“¸ Ø¹Ú©Ø§Ø³ÛŒ Ùˆ Ù†ÙˆØ±Ù¾Ø±Ø¯Ø§Ø²ÛŒ</summary>
                        <div class="param-grid">
                            <div class="form-group">
                                <label>Ø²Ø§ÙˆÛŒÙ‡ Ø¯ÙˆØ±Ø¨ÛŒÙ†</label>
                                <select id="cameraAngle">
                                    <option value="eye-level" selected>Ø³Ø·Ø­ Ú†Ø´Ù…</option>
                                    <option value="slightly-above">Ú©Ù…ÛŒ Ø¨Ø§Ù„Ø§ØªØ±</option>
                                    <option value="slightly-below">Ú©Ù…ÛŒ Ù¾Ø§ÛŒÛŒÙ†â€ŒØªØ±</option>
                                    <option value="high-angle">Ø²Ø§ÙˆÛŒÙ‡ Ø¨Ø§Ù„Ø§</option>
                                    <option value="low-angle">Ø²Ø§ÙˆÛŒÙ‡ Ù¾Ø§ÛŒÛŒÙ†</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Ù†ÙˆØ¹ Ù†Ù…Ø§</label>
                                <select id="shotType">
                                    <option value="full-body" selected>ØªÙ…Ø§Ù… Ù‚Ø¯</option>
                                    <option value="three-quarter">Ø³Ù‡ Ú†Ù‡Ø§Ø±Ù…</option>
                                    <option value="waist-up">Ù†ÛŒÙ…â€ŒØªÙ†Ù‡</option>
                                    <option value="headshot">Ø³Ø± Ùˆ Ø´Ø§Ù†Ù‡</option>
                                    <option value="close-up">Ù†Ù…Ø§ÛŒ Ù†Ø²Ø¯ÛŒÚ© Ú†Ù‡Ø±Ù‡</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Ù†ÙˆØ±Ù¾Ø±Ø¯Ø§Ø²ÛŒ</label>
                                <select id="lighting">
                                    <option value="studio" selected>Ù†ÙˆØ± Ø§Ø³ØªÙˆØ¯ÛŒÙˆ</option>
                                    <option value="natural">Ù†ÙˆØ± Ø·Ø¨ÛŒØ¹ÛŒ</option>
                                    <option value="soft">Ù†ÙˆØ± Ù…Ù„Ø§ÛŒÙ…</option>
                                    <option value="dramatic">Ø¯Ø±Ø§Ù…Ø§ØªÛŒÚ©</option>
                                    <option value="backlit">Ù†ÙˆØ± Ù¾Ø´Øª</option>
                                    <option value="golden-hour">Ø³Ø§Ø¹Øª Ø·Ù„Ø§ÛŒÛŒ</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Ø³Ø¨Ú© Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡</label>
                                <select id="bgStyle">
                                    <option value="white" selected>Ø§Ø³ØªÙˆØ¯ÛŒÙˆ Ø³ÙÛŒØ¯</option>
                                    <option value="gray">Ø§Ø³ØªÙˆØ¯ÛŒÙˆ Ø®Ø§Ú©Ø³ØªØ±ÛŒ</option>
                                    <option value="black">Ø§Ø³ØªÙˆØ¯ÛŒÙˆ Ø³ÛŒØ§Ù‡</option>
                                    <option value="gradient">Ú¯Ø±Ø§Ø¯ÛŒØ§Ù†Øª</option>
                                    <option value="bokeh">Ø¨ÙˆÚ©Ù‡/ØªØ§Ø±</option>
                                    <option value="outdoor">ÙØ¶Ø§ÛŒ Ø¨Ø§Ø² Ø·Ø¨ÛŒØ¹ÛŒ</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Ú©ÛŒÙÛŒØª ØªØµÙˆÛŒØ±</label>
                                <select id="imageQuality">
                                    <option value="professional" selected>Ù…Ø¯ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ</option>
                                    <option value="editorial">Ù…Ø¬Ù„Ù‡ Ø§Ø¯ÛŒØªÙˆØ±ÛŒØ§Ù„</option>
                                    <option value="commercial">ØªØ¨Ù„ÛŒØºØ§ØªÛŒ</option>
                                    <option value="artistic">Ù‡Ù†Ø±ÛŒ</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Ù†Ø³Ø¨Øª ØªØµÙˆÛŒØ±</label>
                                <select id="aspectRatio">
                                    <option value="1:1">Ù…Ø±Ø¨Ø¹ (1:1)</option>
                                    <option value="3:4" selected>Ù¾Ø±ØªØ±Ù‡ (3:4)</option>
                                    <option value="4:3">Ø§ÙÙ‚ÛŒ (4:3)</option>
                                    <option value="16:9">Ø¹Ø±ÛŒØ¶ (16:9)</option>
                                </select>
                            </div>
                        </div>
                    </details>

                    <!-- Additional Details -->
                    <div class="form-group" style="margin-top: 25px;">
                        <label>Ø¬Ø²Ø¦ÛŒØ§Øª Ø§Ø¶Ø§ÙÛŒ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)</label>
                        <textarea id="additionalDetails" rows="3" placeholder="Ø¬Ø²Ø¦ÛŒØ§Øª Ø®Ø§Øµ Ù…Ø«Ù„ Ø§Ú©Ø³Ø³ÙˆØ±ÛŒØŒ Ø³Ø¨Ú© Ø¢Ø±Ø§ÛŒØ´ØŒ Ø²ÛŒØ¨Ø§ÛŒÛŒ Ø´Ù†Ø§Ø³ÛŒ Ø¨Ø±Ù†Ø¯ØŒ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø®Ø§Øµ..." style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-family: 'Inter', sans-serif;"></textarea>
                    </div>

                    <!-- Generate Button -->
                    <button onclick="generateModel()" class="btn-generate" id="generateBtn">
                        âœ¨ ØªÙˆÙ„ÛŒØ¯ Ù…Ø¯Ù„ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ
                    </button>

                </div>
            </div>

            <!-- Preview Section -->
            <div id="previewSection" style="display: none; margin-top: 30px;">
                <div class="preview-container">
                    <h3 style="margin-bottom: 20px; color: #667eea; font-size: 20px;">Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ù…Ø¯Ù„ ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯Ù‡</h3>
                    <img id="generatedImage" src="" alt="Generated Model" class="preview-image">

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                        <div class="form-group">
                            <label>Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ *</label>
                            <select id="saveCategory">
                                <option value="woman">ğŸ‘© Ø²Ù† (Woman)</option>
                                <option value="man">ğŸ‘¨ Ù…Ø±Ø¯ (Man)</option>
                                <option value="girl">ğŸ‘§ Ø¯Ø®ØªØ± (Girl)</option>
                                <option value="boy">ğŸ‘¦ Ù¾Ø³Ø± (Boy)</option>
                                <option value="child">ğŸ‘¶ Ú©ÙˆØ¯Ú© (Child)</option>
                                <option value="couple">ğŸ’‘ Ø²ÙˆØ¬ (Couple)</option>
                                <option value="group">ğŸ‘¥ Ú¯Ø±ÙˆÙ‡ (Group)</option>
                                <option value="elderly">ğŸ‘´ Ø³Ø§Ù„Ù…Ù†Ø¯ (Elderly)</option>
                                <option value="teen">ğŸ§‘ Ù†ÙˆØ¬ÙˆØ§Ù† (Teen)</option>
                                <option value="plus-size">â• Ø³Ø§ÛŒØ² Ø¨Ø²Ø±Ú¯ (Plus Size)</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Ù†Ø§Ù… *</label>
                            <input type="text" id="saveName" placeholder="Ù†Ø§Ù… Ù…Ø¯Ù„">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Ù†Ù…Ø§ÛŒØ´ *</label>
                        <select id="saveVisibility">
                            <option value="private">Ø®ØµÙˆØµÛŒ (ÙÙ‚Ø· Ø§ÛŒÙ† Ú©Ø§Ø±Ø¨Ø±)</option>
                            <option value="public">Ø¹Ù…ÙˆÙ…ÛŒ (Ù‡Ù…Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†)</option>
                        </select>
                        <small style="color: #6b7280; display: block; margin-top: 4px;">
                            âš ï¸ Ø®ØµÙˆØµÛŒ = ÙÙ‚Ø· Ú©Ø§Ø±Ø¨Ø± Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡ Ù…ÛŒâ€ŒØ¨ÛŒÙ†Ø¯ | Ø¹Ù…ÙˆÙ…ÛŒ = Ù‡Ù…Ù‡ Ù…ÛŒâ€ŒØ¨ÛŒÙ†Ù†Ø¯
                        </small>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px;">
                        <button onclick="saveModel()" class="btn-primary">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± Ù…Ø­ØªÙˆØ§ÛŒ Ú©Ø§Ø±Ø¨Ø±</button>
                        <button onclick="discardModel()" style="background: #6c757d; color: white; padding: 14px; border: none; border-radius: 10px; font-size: 15px; font-weight: 600; cursor: pointer;">
                            âŒ Ø­Ø°Ù
                        </button>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <script src="/admin-common.js"></script>
    <script>
        let allUsers = [];
        let selectedUserId = null;
        let generatedImageData = null;

        // Load users on page load
        async function loadUsers() {
            try {
                const response = await fetchWithAuth('/api/admin/users');
                const data = await response.json();

                if (data.success) {
                    allUsers = data.users;
                    const select = document.getElementById('selectedUser');
                    select.innerHTML = '<option value="">-- Ú©Ø§Ø±Ø¨Ø± Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ø³Ø§Ø®Øª Ù…Ø¯Ù„ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ --</option>' +
                        allUsers.map(user =>
                            `<option value="${user.user_id}">${user.email}${user.is_premium ? ' â­ Ù¾Ø±ÛŒÙ…ÛŒÙˆÙ…' : ''}</option>`
                        ).join('');
                }
            } catch (error) {
                console.error('Error loading users:', error);
                showNotification('Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†', 'error');
            }
        }

        function handleUserSelect() {
            selectedUserId = document.getElementById('selectedUser').value;
            if (selectedUserId) {
                console.log('Selected user:', selectedUserId);
            }
        }

        async function generateModel() {
            if (!selectedUserId) {
                showNotification('Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ ÛŒÚ© Ú©Ø§Ø±Ø¨Ø± Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }

            const generateBtn = document.getElementById('generateBtn');
            generateBtn.disabled = true;
            generateBtn.textContent = 'â³ Ø¯Ø± Ø­Ø§Ù„ ØªÙˆÙ„ÛŒØ¯...';

            try {
                // Build comprehensive prompt from all form fields
                const prompt = buildModelPrompt();
                console.log('Generated prompt:', prompt);

                const response = await fetchWithAuth('/api/generate-image-only', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        prompt: prompt,
                        contentType: 'model',
                        aspectRatio: document.getElementById('aspectRatio').value
                    })
                });

                const data = await response.json();

                if (data.success) {
                    generatedImageData = {
                        imageUrl: data.imageUrl,
                        prompt: prompt
                    };

                    document.getElementById('generatedImage').src = data.imageUrl;
                    document.getElementById('previewSection').style.display = 'block';
                    document.getElementById('previewSection').scrollIntoView({ behavior: 'smooth' });

                    showNotification('Ù…Ø¯Ù„ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯!', 'success');
                } else {
                    throw new Error(data.error || 'Generation failed');
                }
            } catch (error) {
                console.error('Generation error:', error);
                showNotification('Ø®Ø·Ø§ Ø¯Ø± ØªÙˆÙ„ÛŒØ¯ Ù…Ø¯Ù„: ' + error.message, 'error');
            } finally {
                generateBtn.disabled = false;
                generateBtn.textContent = 'âœ¨ ØªÙˆÙ„ÛŒØ¯ Ù…Ø¯Ù„ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ';
            }
        }

        function buildModelPrompt() {
            // Basic info
            const gender = document.getElementById('modelGender').value;
            const age = document.getElementById('modelAge').value;
            const ethnicity = document.getElementById('modelEthnicity').value;

            // Face
            const faceShape = document.getElementById('faceShape').value;
            const eyeColor = document.getElementById('eyeColor').value;
            const eyeShape = document.getElementById('eyeShape').value;
            const eyebrows = document.getElementById('eyebrows').value;
            const noseType = document.getElementById('noseType').value;
            const lipFullness = document.getElementById('lipFullness').value;
            const cheekbones = document.getElementById('cheekbones').value;
            const jawline = document.getElementById('jawline').value;
            const chin = document.getElementById('chin').value;

            // Hair
            const hairColor = document.getElementById('hairColor').value;
            const hairLength = document.getElementById('hairLength').value;
            const hairTexture = document.getElementById('hairTexture').value;
            const hairstyle = document.getElementById('hairstyle').value;
            const facialHair = document.getElementById('facialHair').value;

            // Skin & Body
            const skinTone = document.getElementById('skinTone').value;
            const skinTexture = document.getElementById('skinTexture').value;
            const bodyType = document.getElementById('bodyType').value;
            const height = document.getElementById('height').value;

            // Expression & Pose
            const expression = document.getElementById('expression').value;
            const pose = document.getElementById('modelPose').value;
            const headAngle = document.getElementById('headAngle').value;

            // Photography
            const cameraAngle = document.getElementById('cameraAngle').value;
            const shotType = document.getElementById('shotType').value;
            const lighting = document.getElementById('lighting').value;
            const bgStyle = document.getElementById('bgStyle').value;
            const quality = document.getElementById('imageQuality').value;

            // Additional
            const additional = document.getElementById('additionalDetails').value;

            // Build comprehensive prompt
            let prompt = `Professional ${quality} fashion photograph of a ${age.replace('-', ' ')} ${ethnicity} ${gender} model. `;

            prompt += `Face: ${faceShape} face shape, ${eyeShape} ${eyeColor} eyes, ${eyebrows} eyebrows, ${noseType} nose, ${lipFullness} lips, ${cheekbones} cheekbones, ${jawline} jawline, ${chin} chin. `;

            prompt += `Hair: ${hairLength} ${hairTexture} ${hairColor} hair styled in ${hairstyle}. `;
            if (gender === 'male' && facialHair !== 'none') {
                prompt += `${facialHair} facial hair. `;
            }

            prompt += `Skin: ${skinTone} skin tone, ${skinTexture}. `;
            prompt += `Body: ${bodyType} ${height} build. `;

            prompt += `Expression: ${expression.replace('-', ' ')} expression. `;
            prompt += `Pose: ${pose.replace('-', ' ')} pose, head ${headAngle.replace('-', ' ')}. `;

            prompt += `Photography: ${shotType.replace('-', ' ')} shot from ${cameraAngle.replace('-', ' ')} angle, ${lighting} lighting, ${bgStyle.replace('-', ' ')} background. `;

            prompt += `Professional fashion photography, high-end editorial quality, sharp focus, perfect lighting, detailed features, photorealistic, 8K resolution. `;

            if (additional) {
                prompt += additional + ' ';
            }

            return prompt;
        }

        async function saveModel() {
            if (!generatedImageData || !selectedUserId) {
                showNotification('Missing required data', 'error');
                return;
            }

            try {
                const response = await fetchWithAuth('/api/admin/save-generated-to-user', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        imageUrl: generatedImageData.imageUrl,
                        user_id: selectedUserId,
                        content_type: 'model',
                        visibility: document.getElementById('saveVisibility').value,
                        category: document.getElementById('saveCategory').value,
                        name: document.getElementById('saveName').value || 'AI Generated Model',
                        description: `AI Generated Model: ${generatedImageData.prompt}`,
                        prompt: generatedImageData.prompt
                    })
                });

                const data = await response.json();

                if (data.success) {
                    showNotification('Ù…Ø¯Ù„ Ø¯Ø± Ù…Ø­ØªÙˆØ§ÛŒ Ú©Ø§Ø±Ø¨Ø± Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯!', 'success');
                    discardModel();
                } else {
                    throw new Error(data.error || 'Save failed');
                }
            } catch (error) {
                console.error('Save error:', error);
                showNotification('Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡ Ù…Ø¯Ù„: ' + error.message, 'error');
            }
        }

        function discardModel() {
            generatedImageData = null;
            document.getElementById('previewSection').style.display = 'none';
            document.getElementById('saveName').value = '';
        }

        // Load users on page load
        loadUsers();
    </script>
</body>
</html>
