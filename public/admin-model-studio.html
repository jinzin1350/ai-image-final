<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ุงุณุชูุฏู ุชููุฏ ูุฏู | ูุฏุฑุช</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/admin-style.css">
    <style>
        .studio-container {
            max-width: 1400px;
            margin: 0 auto;
        }
        .studio-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 3px;
            border-radius: 15px;
            margin-bottom: 30px;
        }
        .studio-card-inner {
            background: white;
            padding: 30px;
            border-radius: 13px;
        }
        .studio-section {
            margin-bottom: 20px;
            background: #f8f9ff;
            padding: 20px;
            border-radius: 12px;
        }
        .studio-section summary {
            font-weight: 700;
            font-size: 16px;
            cursor: pointer;
            padding: 5px;
            margin-bottom: 15px;
        }
        .param-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 15px;
        }
        @media (max-width: 1024px) {
            .param-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        @media (max-width: 640px) {
            .param-grid {
                grid-template-columns: 1fr;
            }
        }
        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 6px;
            color: #374151;
            font-size: 14px;
        }
        .form-group select,
        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            font-family: 'Inter', sans-serif;
            transition: all 0.2s;
        }
        .form-group select:focus,
        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        .btn-generate {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 17px;
            font-weight: 700;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .btn-generate:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }
        .btn-generate:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        .preview-container {
            background: #f8f9ff;
            padding: 25px;
            border-radius: 15px;
            border: 3px solid #667eea;
        }
        .preview-image {
            width: 100%;
            max-width: 600px;
            border-radius: 12px;
            display: block;
            margin: 0 auto 20px;
        }
    </style>
</head>
<body>
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
                    <circle cx="20" cy="20" r="18" fill="white" opacity="0.2"/>
                </svg>
                <span>Admin Panel</span>
            </div>
        </div>
        <div class="sidebar-nav-container" data-active-page="model-studio"></div>
        <div class="sidebar-footer">
            <button class="btn-logout" onclick="handleLogout()"><span>Logout</span></button>
        </div>
    </aside>

    <main class="main-content">
        <header class="page-header">
            <div>
                <h1>๐จ ุงุณุชูุฏู ุญุฑููโุง ุชููุฏ ูุฏู</h1>
                <p>ุณุงุฎุช ูุฏูโูุง ุณูุงุฑุด ุจุง ฺฉูุชุฑูโูุง ุฏูู ุธุงูุฑ</p>
            </div>
        </header>

        <div class="studio-container">
            <!-- User Selection -->
            <div class="content-section">
                <h2>ุงูุชุฎุงุจ ฺฉุงุฑุจุฑ</h2>
                <select id="selectedUser" onchange="handleUserSelect()" class="form-control" style="font-size: 15px; padding: 12px;">
                    <option value="">-- ฺฉุงุฑุจุฑ ุฑุง ุจุฑุง ุณุงุฎุช ูุฏู ุงูุชุฎุงุจ ฺฉูุฏ --</option>
                </select>
            </div>

            <!-- Model Studio -->
            <div class="studio-card">
                <div class="studio-card-inner">

                    <!-- Basic Info -->
                    <details open class="studio-section" style="background: #f0f9ff;">
                        <summary style="color: #0369a1;">๐ ุงุทูุงุนุงุช ูพุงู</summary>
                        <div class="param-grid">
                            <div class="form-group">
                                <label>ุฌูุณุช</label>
                                <select id="modelGender">
                                    <option value="female">๐ฉ ุฒู</option>
                                    <option value="male">๐จ ูุฑุฏ</option>
                                    <option value="non-binary">โง ุบุฑ ุฏูุฌูุณุช</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ูุญุฏูุฏู ุณู</label>
                                <select id="modelAge">
                                    <option value="child">๐ถ ฺฉูุฏฺฉ (5-12)</option>
                                    <option value="teen">๐ง ููุฌูุงู (13-17)</option>
                                    <option value="young-adult" selected>๐ค ุฌูุงู (18-25)</option>
                                    <option value="adult">๐ง ุจุฒุฑฺฏุณุงู (26-40)</option>
                                    <option value="middle-aged">๐จโ๐ฆณ ูุงูุณุงู (41-60)</option>
                                    <option value="elderly">๐ด ุณุงูููุฏ (60+)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ูููุช</label>
                                <select id="modelEthnicity">
                                    <option value="caucasian">๐ ูููุงุฒ</option>
                                    <option value="african">๐ ุขูุฑูุง</option>
                                    <option value="asian">๐ ุขุณุง</option>
                                    <option value="hispanic">๐ ูุณูพุงูฺฉ</option>
                                    <option value="middle-eastern">๐ ุฎุงูุฑูุงููโุง</option>
                                    <option value="mixed">๐ ุชุฑฺฉุจ</option>
                                </select>
                            </div>
                        </div>
                    </details>

                    <!-- Face Features -->
                    <details open class="studio-section" style="background: #fff5f5;">
                        <summary style="color: #e53e3e;">๐ ูฺฺฏโูุง ุตูุฑุช</summary>
                        <div class="param-grid">
                            <div class="form-group">
                                <label>ุดฺฉู ุตูุฑุช</label>
                                <select id="faceShape">
                                    <option value="oval" selected>ุจุถ</option>
                                    <option value="round">ฺฏุฑุฏ</option>
                                    <option value="square">ูุฑุจุน</option>
                                    <option value="heart">ููุจ</option>
                                    <option value="diamond">ุงููุงุณ</option>
                                    <option value="long">ุฏุฑุงุฒ</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ุฑูฺฏ ฺุดู</label>
                                <select id="eyeColor">
                                    <option value="brown">ููููโุง</option>
                                    <option value="blue">ุขุจ</option>
                                    <option value="green">ุณุจุฒ</option>
                                    <option value="hazel">ุนุณู</option>
                                    <option value="gray">ุฎุงฺฉุณุชุฑ</option>
                                    <option value="amber">ฺฉูุฑุจุง</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ุดฺฉู ฺุดู</label>
                                <select id="eyeShape">
                                    <option value="almond" selected>ุจุงุฏุงู</option>
                                    <option value="round">ฺฏุฑุฏ</option>
                                    <option value="hooded">ูพูุดุฏู</option>
                                    <option value="upturned">ฺฏูุดู ุจุงูุง</option>
                                    <option value="downturned">ฺฏูุดู ูพุงู</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ุงุจุฑู</label>
                                <select id="eyebrows">
                                    <option value="natural">ุทุจุน</option>
                                    <option value="thick">ุถุฎู</option>
                                    <option value="thin">ูุงุฒฺฉ</option>
                                    <option value="arched">ฺฉูุงู</option>
                                    <option value="straight">ูุณุชูู</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ููุน ุจู</label>
                                <select id="noseType">
                                    <option value="straight">ูุณุชูู</option>
                                    <option value="button">ุฏฺฉููโุง</option>
                                    <option value="roman">ุฑูู</option>
                                    <option value="greek">ููุงู</option>
                                    <option value="upturned">ุจุงูุง ุฑูุชู</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ูพุฑ ูุจ</label>
                                <select id="lipFullness">
                                    <option value="thin">ูุงุฒฺฉ</option>
                                    <option value="medium" selected>ูุชูุณุท</option>
                                    <option value="full">ูพุฑ</option>
                                    <option value="very-full">ุฎู ูพุฑ</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ุงุณุชุฎูุงู ฺฏููู</label>
                                <select id="cheekbones">
                                    <option value="subtle">ููุงู</option>
                                    <option value="defined" selected>ูุดุฎุต</option>
                                    <option value="high">ุจุฑุฌุณุชู ู ุจุงูุง</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ุฎุท ูฺฉ</label>
                                <select id="jawline">
                                    <option value="soft">ูุฑู</option>
                                    <option value="defined" selected>ูุดุฎุต</option>
                                    <option value="sharp">ุชุฒ</option>
                                    <option value="square">ูุฑุจุน</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ฺุงูู</label>
                                <select id="chin">
                                    <option value="rounded">ฺฏุฑุฏ</option>
                                    <option value="pointed">ููฺฉ ุชุฒ</option>
                                    <option value="square">ูุฑุจุน</option>
                                    <option value="cleft">ุดฺฉุงู ุฏุงุฑ</option>
                                </select>
                            </div>
                        </div>
                    </details>

                    <!-- Hair Style -->
                    <details open class="studio-section" style="background: #fffbeb;">
                        <summary style="color: #d97706;">๐ ูู ู ุงุณุชุงู</summary>
                        <div class="param-grid">
                            <div class="form-group">
                                <label>ุฑูฺฏ ูู</label>
                                <select id="hairColor">
                                    <option value="black">ูุดฺฉ</option>
                                    <option value="dark-brown">ููููโุง ุชุฑู</option>
                                    <option value="light-brown">ููููโุง ุฑูุดู</option>
                                    <option value="blonde">ุจูููุฏ</option>
                                    <option value="platinum">ุจูููุฏ ูพูุงุชู</option>
                                    <option value="red">ูุฑูุฒ</option>
                                    <option value="auburn">ูุฑูุฒ ูุงู ุจู ููููโุง</option>
                                    <option value="gray">ุฎุงฺฉุณุชุฑ</option>
                                    <option value="white">ุณูุฏ</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ุทูู ูู</label>
                                <select id="hairLength">
                                    <option value="bald">ุจุฏูู ูู</option>
                                    <option value="very-short">ุฎู ฺฉูุชุงู</option>
                                    <option value="short">ฺฉูุชุงู</option>
                                    <option value="medium">ูุชูุณุท</option>
                                    <option value="long" selected>ุจููุฏ</option>
                                    <option value="very-long">ุฎู ุจููุฏ</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ุจุงูุช ูู</label>
                                <select id="hairTexture">
                                    <option value="straight" selected>ุตุงู</option>
                                    <option value="wavy">ููุฌ ุฏุงุฑ</option>
                                    <option value="curly">ูุฑ</option>
                                    <option value="coily">ูุฑ ูพฺุฏู</option>
                                    <option value="kinky">ูุฑ ุฎู ุฑุฒ</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ูุฏู ูู</label>
                                <select id="hairstyle">
                                    <option value="loose" selected>ุขุฒุงุฏ ู ุทุจุน</option>
                                    <option value="ponytail">ุฏู ุงุณุจ</option>
                                    <option value="bun">ฺฏูุฌู</option>
                                    <option value="braids">ุจุงูุชู</option>
                                    <option value="updo">ุดููู</option>
                                    <option value="bob">ฺฉูุชุงู ุจุงุจ</option>
                                    <option value="pixie">ฺฉูุชุงู ูพฺฉุณ</option>
                                    <option value="slicked-back">ฺุณุจุฏู ุจู ุนูุจ</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ูู ุตูุฑุช (ูุฑุฏุงูู)</label>
                                <select id="facialHair">
                                    <option value="none" selected>ูุฏุงุฑุฏ</option>
                                    <option value="stubble">ุชู ุฑุด ุณุจฺฉ</option>
                                    <option value="beard">ุฑุด ฺฉุงูู</option>
                                    <option value="goatee">ุฑุด ุจุฒ</option>
                                    <option value="mustache">ุณุจู</option>
                                </select>
                            </div>
                        </div>
                    </details>

                    <!-- Skin & Body -->
                    <details open class="studio-section" style="background: #f0fdf4;">
                        <summary style="color: #16a34a;">๐จ ูพูุณุช ู ููุน ุจุฏู</summary>
                        <div class="param-grid">
                            <div class="form-group">
                                <label>ุฑูฺฏ ูพูุณุช</label>
                                <select id="skinTone">
                                    <option value="very-fair">ุจุณุงุฑ ุฑูุดู</option>
                                    <option value="fair">ุฑูุดู</option>
                                    <option value="medium" selected>ูุชูุณุท</option>
                                    <option value="olive">ุฒุชูู</option>
                                    <option value="tan">ุจุฑูุฒู</option>
                                    <option value="brown">ููููโุง</option>
                                    <option value="dark-brown">ููููโุง ุชุฑู</option>
                                    <option value="deep">ุชุฑู</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ุจุงูุช ูพูุณุช</label>
                                <select id="skinTexture">
                                    <option value="smooth" selected>ุตุงู ู ุจโุนุจ</option>
                                    <option value="natural">ุทุจุน</option>
                                    <option value="freckled">ฺฉฺฉ ู ูฺฉ ุฏุงุฑ</option>
                                    <option value="with-beauty-marks">ุจุง ุฎุงู ุฒุจุง</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ููุน ุจุฏู</label>
                                <select id="bodyType">
                                    <option value="slim">ูุงุบุฑ</option>
                                    <option value="athletic" selected>ูุฑุฒุดฺฉุงุฑ</option>
                                    <option value="average">ูุชูุณุท</option>
                                    <option value="curvy">ุฎูุด ุงูุฏุงู</option>
                                    <option value="plus-size">ุณุงุฒ ุจุฒุฑฺฏ</option>
                                    <option value="muscular">ุนุถูุงู</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ูุฏ</label>
                                <select id="height">
                                    <option value="petite">ฺฉูุชุงู (ุฒุฑ 163 ุณุงูุช)</option>
                                    <option value="average" selected>ูุชูุณุท (163-173 ุณุงูุช)</option>
                                    <option value="tall">ุจููุฏ (173-183 ุณุงูุช)</option>
                                    <option value="very-tall">ุฎู ุจููุฏ (ุจุงูุง 183 ุณุงูุช)</option>
                                </select>
                            </div>
                        </div>
                    </details>

                    <!-- Expression & Pose -->
                    <details open class="studio-section" style="background: #fef2f2;">
                        <summary style="color: #dc2626;">๐ ุญุงูุช ู ฺุณุช</summary>
                        <div class="param-grid">
                            <div class="form-group">
                                <label>ุญุงูุช ฺูุฑู</label>
                                <select id="expression">
                                    <option value="neutral-confident" selected>ุฎูุซ ู ุจุง ุงุนุชูุงุฏ ุจู ููุณ</option>
                                    <option value="smiling">ูุจุฎูุฏ</option>
                                    <option value="laughing">ุฎูุฏุงู</option>
                                    <option value="serious">ุฌุฏ</option>
                                    <option value="mysterious">ูุฑููุฒ</option>
                                    <option value="seductive">ูุฑุจูุฏู</option>
                                    <option value="friendly">ุฏูุณุชุงูู</option>
                                    <option value="fierce">ูุงุทุน</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ฺุณุช</label>
                                <select id="modelPose">
                                    <option value="standing-front" selected>ุงุณุชุงุฏู ุฑู ุจู ุฌูู</option>
                                    <option value="standing-side">ุงุณุชุงุฏู ููุฑุฎ</option>
                                    <option value="walking">ุฏุฑ ุญุงู ุฑุงู ุฑูุชู</option>
                                    <option value="sitting">ูุดุณุชู</option>
                                    <option value="leaning">ุชฺฉู ุฏุงุฏู</option>
                                    <option value="hands-on-hips">ุฏุณุช ุจู ฺฉูุฑ</option>
                                    <option value="crossed-arms">ุฏุณุช ุจู ุณูู</option>
                                    <option value="dynamic">ฺุณุช ูพูุง</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ุฒุงูู ุณุฑ</label>
                                <select id="headAngle">
                                    <option value="straight" selected>ูุณุชูู</option>
                                    <option value="tilted-left">ฺฉุฌ ุจู ฺูพ</option>
                                    <option value="tilted-right">ฺฉุฌ ุจู ุฑุงุณุช</option>
                                    <option value="looking-up">ูฺฏุงู ุจู ุจุงูุง</option>
                                    <option value="looking-down">ูฺฏุงู ุจู ูพุงู</option>
                                </select>
                            </div>
                        </div>
                    </details>

                    <!-- Photography Settings -->
                    <details open class="studio-section" style="background: #ede9fe;">
                        <summary style="color: #7c3aed;">๐ธ ุนฺฉุงุณ ู ููุฑูพุฑุฏุงุฒ</summary>
                        <div class="param-grid">
                            <div class="form-group">
                                <label>ุฒุงูู ุฏูุฑุจู</label>
                                <select id="cameraAngle">
                                    <option value="eye-level" selected>ุณุทุญ ฺุดู</option>
                                    <option value="slightly-above">ฺฉู ุจุงูุงุชุฑ</option>
                                    <option value="slightly-below">ฺฉู ูพุงูโุชุฑ</option>
                                    <option value="high-angle">ุฒุงูู ุจุงูุง</option>
                                    <option value="low-angle">ุฒุงูู ูพุงู</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ููุน ููุง</label>
                                <select id="shotType">
                                    <option value="full-body" selected>ุชูุงู ูุฏ</option>
                                    <option value="three-quarter">ุณู ฺูุงุฑู</option>
                                    <option value="waist-up">ููโุชูู</option>
                                    <option value="headshot">ุณุฑ ู ุดุงูู</option>
                                    <option value="close-up">ููุง ูุฒุฏฺฉ ฺูุฑู</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ููุฑูพุฑุฏุงุฒ</label>
                                <select id="lighting">
                                    <option value="studio" selected>ููุฑ ุงุณุชูุฏู</option>
                                    <option value="natural">ููุฑ ุทุจุน</option>
                                    <option value="soft">ููุฑ ููุงู</option>
                                    <option value="dramatic">ุฏุฑุงูุงุชฺฉ</option>
                                    <option value="backlit">ููุฑ ูพุดุช</option>
                                    <option value="golden-hour">ุณุงุนุช ุทูุง</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ุณุจฺฉ ูพุณโุฒููู</label>
                                <select id="bgStyle">
                                    <option value="white" selected>ุงุณุชูุฏู ุณูุฏ</option>
                                    <option value="gray">ุงุณุชูุฏู ุฎุงฺฉุณุชุฑ</option>
                                    <option value="black">ุงุณุชูุฏู ุณุงู</option>
                                    <option value="gradient">ฺฏุฑุงุฏุงูุช</option>
                                    <option value="bokeh">ุจูฺฉู/ุชุงุฑ</option>
                                    <option value="outdoor">ูุถุง ุจุงุฒ ุทุจุน</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ฺฉูุช ุชุตูุฑ</label>
                                <select id="imageQuality">
                                    <option value="professional" selected>ูุฏ ุญุฑููโุง</option>
                                    <option value="editorial">ูุฌูู ุงุฏุชูุฑุงู</option>
                                    <option value="commercial">ุชุจูุบุงุช</option>
                                    <option value="artistic">ููุฑ</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ูุณุจุช ุชุตูุฑ</label>
                                <select id="aspectRatio">
                                    <option value="1:1">ูุฑุจุน (1:1)</option>
                                    <option value="3:4" selected>ูพุฑุชุฑู (3:4)</option>
                                    <option value="4:3">ุงูู (4:3)</option>
                                    <option value="16:9">ุนุฑุถ (16:9)</option>
                                </select>
                            </div>
                        </div>
                    </details>

                    <!-- Accessory Photography Section -->
                    <details class="studio-section" style="background: #fef3c7;">
                        <summary style="color: #d97706;">๐ ุนฺฉุงุณ ุงฺฉุณุณูุฑ (ุจุฑุง ูุฏูโูุง ุงฺฉุณุณูุฑ)</summary>
                        <p style="color: #92400e; margin-bottom: 15px; font-size: 14px;">
                            โ๏ธ ุงู ุจุฎุด ููุท ุจุฑุง ูุฏูโูุง ุงุณุช ฺฉู ูโุฎูุงูุฏ ุจุฑุง ุนฺฉุงุณ ูุญุตููุงุช ุงฺฉุณุณูุฑ ุงุณุชูุงุฏู ฺฉูุฏ.
                            <br>ูโุชูุงูุฏ ุจู ูุฏู ุชูุงู ุจุฏู ุง ุนฺฉุณ ูุฒุฏฺฉ ุงุนุถุง ุจุฏู (ุฏุณุชุ ฺฏุฑุฏูุ ุตูุฑุช) ุงูุชุฎุงุจ ฺฉูุฏ.
                        </p>

                        <div class="form-group" style="margin-bottom: 20px;">
                            <label>ุขุง ุงู ูุฏู ุจุฑุง ุนฺฉุงุณ ุงฺฉุณุณูุฑ ุงุณุชุ</label>
                            <select id="isAccessoryModel">
                                <option value="no">โ ุฎุฑ - ูุฏู ูุนููู</option>
                                <option value="full-body">๐ค ุจูู - ูุฏู ุชูุงู ุจุฏู ุจุฑุง ุงฺฉุณุณูุฑ</option>
                                <option value="body-part">โ ุจูู - ูุฏู ูุฒุฏฺฉ (ุฏุณุชุ ฺฏุฑุฏูุ ุตูุฑุช)</option>
                            </select>
                        </div>

                        <!-- Body Part Type Selection (NEW) -->
                        <div id="bodyPartTypeSection" style="display: none; margin-bottom: 20px;">
                            <div class="form-group">
                                <label>๐ฏ ููุน ูุฏู ูุฒุฏฺฉ (Body Part)</label>
                                <select id="bodyPartType">
                                    <option value="">ุงูุชุฎุงุจ ฺฉูุฏ...</option>
                                    <option value="hand-palm">โ ุฏุณุช - ฺฉู ุฏุณุช (ุจุฑุง ุงูฺฏุดุชุฑุ ุฏุณุชุจูุฏ)</option>
                                    <option value="hand-side">๐ค ุฏุณุช - ููุง ุฌุงูุจ (ุจุฑุง ุงูฺฏุดุชุฑุ ุฏุณุชุจูุฏ)</option>
                                    <option value="wrist">โ ูฺ ุฏุณุช (ุจุฑุง ุณุงุนุชุ ุฏุณุชุจูุฏ)</option>
                                    <option value="neck-chest">๐ ฺฏุฑุฏู ู ุณูู (ุจุฑุง ฺฏุฑุฏูุจูุฏ)</option>
                                    <option value="ear-profile">๐ ูพุฑููุงู ฺฏูุด (ุจุฑุง ฺฏูุดูุงุฑู)</option>
                                    <option value="face-portrait">๐ค ูพุฑุชุฑู ุตูุฑุช (ุจุฑุง ุนูฺฉ)</option>
                                </select>
                                <small style="color: #6b7280; display: block; margin-top: 8px;">
                                    ๐ก ุจุฑุง ุนฺฉุงุณ ุญุฑููโุง ุงฺฉุณุณูุฑุ ูุฏูโูุง ูุฒุฏฺฉ ุจูุชุฑ ุงุฒ ุชูุงู ุจุฏู ูุณุชูุฏ
                                </small>
                            </div>
                        </div>

                        <div id="accessoryClothingSection" style="display: none;">
                            <div class="form-group">
                                <label>ุณุจฺฉ ูุจุงุณ ุจุฑุง ูุฏู ๐จ</label>
                                <select id="accessoryClothingStyle">
                                    <option value="">ุงูุชุฎุงุจ ฺฉูุฏ...</option>
                                    <option value="simple-white-tshirt">ุชโุดุฑุช ุณูุฏ ุณุงุฏู</option>
                                    <option value="black-turtleneck">ูู ุงุณฺฉ ูุดฺฉ</option>
                                    <option value="beige-blazer">ฺฉุช ุจฺ ฺฉูุงุณฺฉ</option>
                                    <option value="gray-sweater">ฺุงฺฉุช ุฎุงฺฉุณุชุฑ ุณุงุฏู</option>
                                    <option value="minimal-dress">ูุจุงุณ ูููุงู ู ุณุงุฏู</option>
                                    <option value="plain-white-shirt">ูพุฑุงูู ุณูุฏ ุณุงุฏู</option>
                                    <option value="navy-cardigan">ฺฉุงุฑุฏฺฏุงู ุณุฑููโุง</option>
                                    <option value="cream-blouse">ุจููุฒ ฺฉุฑู ุฑูฺฏ</option>
                                    <option value="black-v-neck">ุชโุดุฑุช ูู V ูุดฺฉ</option>
                                    <option value="neutral-tank-top">ุชุงูพ ุจุฏูู ุขุณุชู ุฎูุซ</option>
                                </select>
                                <small style="color: #6b7280; display: block; margin-top: 8px;">
                                    ๐ก ูุจุงุณโูุง ุณุงุฏู ู ุชฺฉโุฑูฺฏ ุจูุชุฑู ุงูุชุฎุงุจ ุจุฑุง ููุงุด ุงฺฉุณุณูุฑ ูุณุชูุฏ
                                </small>
                            </div>

                            <div class="form-group">
                                <label>ูุฑููฺฏ ุฏูุฑุจู ๐ท</label>
                                <select id="accessoryCameraFraming">
                                    <option value="upper-body">ููโุชูู ุจุงูุง (ุจุฑุง ุฌูุงูุฑุงุชุ ุนูฺฉุ ฺฉูุงู)</option>
                                    <option value="three-quarter">ุณูโฺูุงุฑู ุจุฏู (ุจุฑุง ฺฉูุ ฺฉูุฑุจูุฏ)</option>
                                    <option value="hands-focus">ุชูุฑฺฉุฒ ุฑู ุฏุณุชโูุง (ุจุฑุง ุณุงุนุชุ ุงูฺฏุดุชุฑุ ุฏุณุชุจูุฏ)</option>
                                    <option value="face-neck-focus">ุชูุฑฺฉุฒ ุฑู ุตูุฑุช ู ฺฏุฑุฏู (ุจุฑุง ฺฏูุดูุงุฑูุ ฺฏุฑุฏูุจูุฏ)</option>
                                </select>
                                <small style="color: #6b7280; display: block; margin-top: 8px;">
                                    ๐ธ ูุญูู ูุฑู ุดุฏู ูุฏู ุจุณุชู ุจู ููุน ุงฺฉุณุณูุฑ
                                </small>
                            </div>

                            <div class="form-group">
                                <label>ุญุงูุช ุจุฏู ุจุฑุง ุงฺฉุณุณูุฑ ๐คธ</label>
                                <select id="accessoryPose">
                                    <option value="natural-standing">ุงุณุชุงุฏู ุทุจุน</option>
                                    <option value="hands-visible">ุฏุณุชโูุง ูุงุจู ุฑูุช (ุจุฑุง ุณุงุนุชุ ุงูฺฏุดุชุฑ)</option>
                                    <option value="casual-confident">ุงุนุชูุงุฏ ุจู ููุณ ู ุฑุงุญุช</option>
                                    <option value="minimal-movement">ุญุฑฺฉุช ฺฉูุ ุชูุฑฺฉุฒ ุฑู ุงฺฉุณุณูุฑ</option>
                                </select>
                            </div>
                        </div>
                    </details>

                    <!-- Underwear Photography Section -->
                    <details class="studio-section" style="background: #fce7f3;">
                        <summary style="color: #be123c;">๐ ุนฺฉุงุณ ูุจุงุณ ุฒุฑ (ุจุฑุง ูุฏูโูุง ูุจุงุณ ุฒุฑ)</summary>
                        <p style="color: #881337; margin-bottom: 15px; font-size: 14px;">
                            โ๏ธ ุงู ุจุฎุด ููุท ุจุฑุง ูุฏูโูุง ุงุณุช ฺฉู ูโุฎูุงูุฏ ุจุฑุง ุนฺฉุงุณ ูุญุตููุงุช ูุจุงุณ ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ.
                            <br>ุนฺฉุงุณ ุจู ุตูุฑุช ุญุฑููโุงุ ูุญุชุฑูุงูู ู ููุงุณุจ ุจุฑุง ฺฉุงุชุงููฺฏโูุง ูุฑูุดฺฏุงู ุฎูุงูุฏ ุจูุฏ.
                        </p>

                        <div class="form-group" style="margin-bottom: 20px;">
                            <label>ุขุง ุงู ูุฏู ุจุฑุง ุนฺฉุงุณ ูุจุงุณ ุฒุฑ ุงุณุชุ</label>
                            <select id="isUnderwearModel">
                                <option value="no">โ ุฎุฑ - ูุฏู ูุนููู</option>
                                <option value="yes">โ ุจูู - ูุฏู ูุจุงุณ ุฒุฑ</option>
                            </select>
                        </div>

                        <div id="underwearSettingsSection" style="display: none;">
                            <div class="form-group">
                                <label>ููุน ูุจุงุณ ุฒุฑ ๐</label>
                                <select id="underwearTypeForModel">
                                    <option value="">ุงูุชุฎุงุจ ฺฉูุฏ...</option>
                                    <option value="bra">ุณูุชู (ูุฏู ุจุง ุดูุฑุช ูโูพูุดุฏ)</option>
                                    <option value="panty">ุดูุฑุช (ูุฏู ุจุง ุชุงูพ ูโูพูุดุฏ)</option>
                                    <option value="lingerie-set">ุณุช ูุจุงุณ ุฒุฑ (ูุฏู ููุท ุจุง ูุจุงุณ ุฒุฑ)</option>
                                    <option value="sports-bra">ุณูุชู ูุฑุฒุด (ูุฏู ุจุง ุดูุฑุช ูุฑุฒุด)</option>
                                    <option value="boxers">ุจุงฺฉุณุฑ (ูุฏู ุจุง ุชุงูพ ูโูพูุดุฏ)</option>
                                    <option value="briefs">ุฒุฑุดูุฑุช (ูุฏู ุจุง ุชุงูพ ูโูพูุดุฏ)</option>
                                    <option value="bodysuit">ุจุงุฏโุณูุช (ูุฏู ฺฉุงูู)</option>
                                    <option value="shapewear">ูุจุงุณ ูุฑูโุฏููุฏู (ูุฏู ฺฉุงูู)</option>
                                    <option value="sleepwear">ูุจุงุณ ุฎูุงุจ (ูุฏู ฺฉุงูู)</option>
                                </select>
                                <small style="color: #6b7280; display: block; margin-top: 8px;">
                                    ๐ก ููุด ูุตููุน ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ูุจุงุณ ูฺฉูู ุฑุง ุงุถุงูู ูโฺฉูุฏ ุชุง Gemini ูุจูู ฺฉูุฏ
                                </small>
                            </div>

                            <div class="form-group">
                                <label>ูุจุงุณ ุงูู ูุฏู (ุจุฑุง ุจุงูุงุชูู) ๐</label>
                                <select id="underwearTopClothing">
                                    <option value="">ูฺ (ุจุงูุงุชูู ุฎุงู)</option>
                                    <option value="white-tank">ุชุงูพ ุณูุฏ ุณุงุฏู</option>
                                    <option value="black-tank">ุชุงูพ ูุดฺฉ ุณุงุฏู</option>
                                    <option value="gray-tank">ุชุงูพ ุฎุงฺฉุณุชุฑ ุณุงุฏู</option>
                                    <option value="white-sports-bra">ุณูุชู ูุฑุฒุด ุณูุฏ</option>
                                    <option value="black-sports-bra">ุณูุชู ูุฑุฒุด ูุดฺฉ</option>
                                    <option value="nude-tank">ุชุงูพ ุจฺ (ุฑูฺฏ ูพูุณุช)</option>
                                </select>
                                <small style="color: #6b7280; display: block; margin-top: 8px;">
                                    ๐ก ุจุฑุง ุนฺฉุงุณ ุณูุชู: ูฺ | ุจุฑุง ุนฺฉุงุณ ุดูุฑุช: ุชุงูพ
                                </small>
                            </div>

                            <div class="form-group">
                                <label>ูุจุงุณ ุฏูู ูุฏู (ุจุฑุง ูพุงูโุชูู) ๐ฉณ</label>
                                <select id="underwearBottomClothing">
                                    <option value="">ูฺ (ูพุงูโุชูู ุฎุงู)</option>
                                    <option value="black-shorts">ุดูุฑุช ูุฑุฒุด ูุดฺฉ</option>
                                    <option value="white-shorts">ุดูุฑุช ูุฑุฒุด ุณูุฏ</option>
                                    <option value="gray-shorts">ุดูุฑุช ูุฑุฒุด ุฎุงฺฉุณุชุฑ</option>
                                    <option value="black-athletic-shorts">ุดูุฑุช ูุฑุฒุด ฺฉูุชุงู ูุดฺฉ</option>
                                    <option value="nude-shorts">ุดูุฑุช ุจฺ (ุฑูฺฏ ูพูุณุช)</option>
                                </select>
                                <small style="color: #6b7280; display: block; margin-top: 8px;">
                                    ๐ก ุจุฑุง ุนฺฉุงุณ ุดูุฑุช: ูฺ | ุจุฑุง ุนฺฉุงุณ ุณูุชู: ุดูุฑุช
                                </small>
                            </div>

                            <div class="form-group">
                                <label>ูุฑููฺฏ ุฏูุฑุจู ๐ท</label>
                                <select id="underwearCameraFraming">
                                    <option value="upper-body">ููโุชูู ุจุงูุง</option>
                                    <option value="three-quarter">ุณูโฺูุงุฑู ุจุฏู</option>
                                    <option value="full-body">ุชูุงู ุจุฏู</option>
                                    <option value="torso-focus">ุชูุฑฺฉุฒ ุฑู ุชูู</option>
                                </select>
                                <small style="color: #6b7280; display: block; margin-top: 8px;">
                                    ๐ธ ูุญูู ูุฑู ุดุฏู ูุฏู ุจุฑุง ุนฺฉุงุณ ูุญุชุฑูุงูู ูุญุตูู
                                </small>
                            </div>

                            <div class="form-group">
                                <label>ุญุงูุช ุจุฏู ๐คธ</label>
                                <select id="underwearPose">
                                    <option value="natural-standing">ุงุณุชุงุฏู ุทุจุน</option>
                                    <option value="confident-pose">ฺุณุช ุจุง ุงุนุชูุงุฏ ุจู ููุณ</option>
                                    <option value="side-angle">ุฒุงูู ููโุฑุฎ</option>
                                    <option value="catalog-pose">ฺุณุช ฺฉุงุชุงููฺฏ ุญุฑููโุง</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label>ุณุจฺฉ ุนฺฉุงุณ ๐ธ</label>
                                <select id="underwearPhotoStyle">
                                    <option value="clean-minimal">ุชูุฒ ู ูููุงู</option>
                                    <option value="retail-catalog">ฺฉุงุชุงููฺฏ ูุฑูุดฺฏุงู</option>
                                    <option value="professional-studio">ุงุณุชูุฏู ุญุฑููโุง</option>
                                    <option value="elegant-tasteful">ุฒุจุง ู ูุญุชุฑูุงูู</option>
                                </select>
                                <small style="color: #6b7280; display: block; margin-top: 8px;">
                                    ๐ก ููู ุณุจฺฉโูุง ุญุฑููโุง ู ูุญุชุฑูุงูู ูุณุชูุฏ
                                </small>
                            </div>
                        </div>
                    </details>

                    <!-- Additional Details -->
                    <div class="form-group" style="margin-top: 25px;">
                        <label>ุฌุฒุฆุงุช ุงุถุงู (ุงุฎุชุงุฑ)</label>
                        <textarea id="additionalDetails" rows="3" placeholder="ุฌุฒุฆุงุช ุฎุงุต ูุซู ุงฺฉุณุณูุฑุ ุณุจฺฉ ุขุฑุงุดุ ุฒุจุง ุดูุงุณ ุจุฑูุฏุ ูฺฺฏโูุง ุฎุงุต..." style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-family: 'Inter', sans-serif;"></textarea>
                    </div>

                    <!-- Generate Button -->
                    <button onclick="generateModel()" class="btn-generate" id="generateBtn">
                        โจ ุชููุฏ ูุฏู ุญุฑููโุง
                    </button>

                </div>
            </div>

            <!-- Preview Section -->
            <div id="previewSection" style="display: none; margin-top: 30px;">
                <div class="preview-container">
                    <h3 style="margin-bottom: 20px; color: #667eea; font-size: 20px;">ูพุดโููุงุด ูุฏู ุชููุฏ ุดุฏู</h3>
                    <img id="generatedImage" src="" alt="Generated Model" class="preview-image">

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                        <div class="form-group">
                            <label>ุฏุณุชูโุจูุฏ *</label>
                            <select id="saveCategory">
                                <option value="woman">๐ฉ ุฒู (Woman)</option>
                                <option value="man">๐จ ูุฑุฏ (Man)</option>
                                <option value="girl">๐ง ุฏุฎุชุฑ (Girl)</option>
                                <option value="boy">๐ฆ ูพุณุฑ (Boy)</option>
                                <option value="child">๐ถ ฺฉูุฏฺฉ (Child)</option>
                                <option value="couple">๐ ุฒูุฌ (Couple)</option>
                                <option value="group">๐ฅ ฺฏุฑูู (Group)</option>
                                <option value="elderly">๐ด ุณุงูููุฏ (Elderly)</option>
                                <option value="teen">๐ง ููุฌูุงู (Teen)</option>
                                <option value="plus-size">โ ุณุงุฒ ุจุฒุฑฺฏ (Plus Size)</option>
                                <option value="accessory">๐ ุงฺฉุณุณูุฑ (Accessory)</option>
                                <option value="underwear">๐ ูุจุงุณ ุฒุฑ (Underwear)</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>ูุงู *</label>
                            <input type="text" id="saveName" placeholder="ูุงู ูุฏู">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>ููุงุด *</label>
                        <select id="saveVisibility">
                            <option value="private">ุฎุตูุต (ููุท ุงู ฺฉุงุฑุจุฑ)</option>
                            <option value="public">ุนููู (ููู ฺฉุงุฑุจุฑุงู)</option>
                        </select>
                        <small style="color: #6b7280; display: block; margin-top: 4px;">
                            โ๏ธ ุฎุตูุต = ููุท ฺฉุงุฑุจุฑ ุงูุชุฎุงุจ ุดุฏู ูโุจูุฏ | ุนููู = ููู ูโุจููุฏ
                        </small>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px;">
                        <button onclick="saveModel()" class="btn-primary">๐พ ุฐุฎุฑู ุฏุฑ ูุญุชูุง ฺฉุงุฑุจุฑ</button>
                        <button onclick="discardModel()" style="background: #6c757d; color: white; padding: 14px; border: none; border-radius: 10px; font-size: 15px; font-weight: 600; cursor: pointer;">
                            โ ุญุฐู
                        </button>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <script src="/admin-menu.js"></script>
    <script src="/admin-common.js"></script>
    <script>
        let allUsers = [];
        let selectedUserId = null;
        let generatedImageData = null;

        // Load users on page load
        async function loadUsers() {
            try {
                const response = await fetchWithAuth('/api/admin/users');
                const data = await response.json();

                if (data.success) {
                    allUsers = data.users;
                    const select = document.getElementById('selectedUser');
                    select.innerHTML = '<option value="">-- ฺฉุงุฑุจุฑ ุฑุง ุจุฑุง ุณุงุฎุช ูุฏู ุงูุชุฎุงุจ ฺฉูุฏ --</option>' +
                        allUsers.map(user =>
                            `<option value="${user.user_id}">${user.email}${user.is_premium ? ' โญ ูพุฑููู' : ''}</option>`
                        ).join('');
                }
            } catch (error) {
                console.error('Error loading users:', error);
                showNotification('ุฎุทุง ุฏุฑ ุจุงุฑฺฏุฐุงุฑ ฺฉุงุฑุจุฑุงู', 'error');
            }
        }

        function handleUserSelect() {
            selectedUserId = document.getElementById('selectedUser').value;
            if (selectedUserId) {
                console.log('Selected user:', selectedUserId);
            }
        }

        // Toggle accessory clothing section
        document.getElementById('isAccessoryModel').addEventListener('change', function() {
            const accessoryClothingSection = document.getElementById('accessoryClothingSection');
            const bodyPartTypeSection = document.getElementById('bodyPartTypeSection');

            if (this.value === 'full-body') {
                accessoryClothingSection.style.display = 'block';
                bodyPartTypeSection.style.display = 'none';
            } else if (this.value === 'body-part') {
                accessoryClothingSection.style.display = 'none';
                bodyPartTypeSection.style.display = 'block';
            } else {
                accessoryClothingSection.style.display = 'none';
                bodyPartTypeSection.style.display = 'none';
            }
        });

        // Toggle underwear settings section
        document.getElementById('isUnderwearModel').addEventListener('change', function() {
            const underwearSettingsSection = document.getElementById('underwearSettingsSection');
            if (this.value === 'yes') {
                underwearSettingsSection.style.display = 'block';
            } else {
                underwearSettingsSection.style.display = 'none';
            }
        });

        async function generateModel() {
            if (!selectedUserId) {
                showNotification('ูุทูุงู ุงุจุชุฏุง ฺฉ ฺฉุงุฑุจุฑ ุงูุชุฎุงุจ ฺฉูุฏ', 'error');
                return;
            }

            const generateBtn = document.getElementById('generateBtn');
            generateBtn.disabled = true;
            generateBtn.textContent = 'โณ ุฏุฑ ุญุงู ุชููุฏ...';

            try {
                // Build comprehensive prompt from all form fields
                const prompt = buildModelPrompt();
                console.log('Generated prompt:', prompt);

                const response = await fetchWithAuth('/api/generate-image-only', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        prompt: prompt,
                        contentType: 'model',
                        aspectRatio: document.getElementById('aspectRatio').value
                    })
                });

                const data = await response.json();

                if (data.success) {
                    generatedImageData = {
                        imageUrl: data.imageUrl,
                        prompt: prompt
                    };

                    document.getElementById('generatedImage').src = data.imageUrl;
                    document.getElementById('previewSection').style.display = 'block';
                    document.getElementById('previewSection').scrollIntoView({ behavior: 'smooth' });

                    showNotification('ูุฏู ุจุง ููููุช ุชููุฏ ุดุฏ!', 'success');
                } else {
                    throw new Error(data.error || 'Generation failed');
                }
            } catch (error) {
                console.error('Generation error:', error);
                showNotification('ุฎุทุง ุฏุฑ ุชููุฏ ูุฏู: ' + error.message, 'error');
            } finally {
                generateBtn.disabled = false;
                generateBtn.textContent = 'โจ ุชููุฏ ูุฏู ุญุฑููโุง';
            }
        }

        function buildBodyPartPrompt(bodyPartType, gender, age, ethnicity, skinTone, skinTexture, quality) {
            const bodyPartPrompts = {
                'hand-palm': `Professional ${quality} close-up product photography of ${gender} hand, palm facing forward. ${skinTone} ${skinTexture} skin. Hand is elegantly positioned, fingers slightly spread, relaxed natural pose. Clean studio background, soft professional lighting, perfect for displaying rings and bracelets. Extreme close-up, sharp focus on hand details, photorealistic, 8K resolution. Product photography style for jewelry catalog.`,

                'hand-side': `Professional ${quality} close-up product photography of ${gender} hand from side angle. ${skinTone} ${skinTexture} skin. Hand in elegant relaxed pose, side profile view showing wrist and fingers clearly. Clean studio background, professional lighting, ideal for rings, bracelets, and watches. Extreme close-up, sharp focus, photorealistic, 8K resolution. Product photography for jewelry.`,

                'wrist': `Professional ${quality} close-up product photography focusing on ${gender} wrist and forearm. ${skinTone} ${skinTexture} skin. Wrist positioned elegantly at slight angle, forearm visible, hand relaxed. Clean studio background, professional lighting, perfect for displaying watches and bracelets. Close-up shot, sharp focus on wrist area, photorealistic, 8K resolution. Product photography for watch catalog.`,

                'neck-chest': `Professional ${quality} close-up product photography of ${gender} neck and upper chest area. ${skinTone} ${skinTexture} skin. Elegant neckline, shoulders visible, clean minimal styling. Head cropped at chin level (face not shown), focus on neck and collarbone area. Clean studio background, professional lighting, ideal for necklaces and pendants. Close-up shot, sharp focus, photorealistic, 8K resolution. Product photography for jewelry.`,

                'ear-profile': `Professional ${quality} close-up product photography of ${gender} side profile showing ear clearly. ${skinTone} ${skinTexture} skin. Clean ear with elegant profile, hair pulled back away from ear. Face partially visible in profile (focus on ear), neck and shoulder visible. Clean studio background, professional lighting, perfect for earrings. Close-up shot, sharp focus on ear, photorealistic, 8K resolution. Product photography for earring catalog.`,

                'face-portrait': `Professional ${quality} portrait close-up product photography of ${ethnicity} ${gender} face. ${skinTone} ${skinTexture} skin. Clean elegant facial features, neutral confident expression, straight head angle looking at camera. Hair styled neatly. Clean studio background, professional lighting, ideal for sunglasses and eyeglasses. Portrait headshot, sharp focus on face, photorealistic, 8K resolution. Product photography for eyewear catalog.`
            };

            return bodyPartPrompts[bodyPartType] || `Professional product photography close-up of ${gender} ${bodyPartType}`;
        }

        function buildModelPrompt() {
            // Basic info
            const gender = document.getElementById('modelGender').value;
            const age = document.getElementById('modelAge').value;
            const ethnicity = document.getElementById('modelEthnicity').value;

            // Face
            const faceShape = document.getElementById('faceShape').value;
            const eyeColor = document.getElementById('eyeColor').value;
            const eyeShape = document.getElementById('eyeShape').value;
            const eyebrows = document.getElementById('eyebrows').value;
            const noseType = document.getElementById('noseType').value;
            const lipFullness = document.getElementById('lipFullness').value;
            const cheekbones = document.getElementById('cheekbones').value;
            const jawline = document.getElementById('jawline').value;
            const chin = document.getElementById('chin').value;

            // Hair
            const hairColor = document.getElementById('hairColor').value;
            const hairLength = document.getElementById('hairLength').value;
            const hairTexture = document.getElementById('hairTexture').value;
            const hairstyle = document.getElementById('hairstyle').value;
            const facialHair = document.getElementById('facialHair').value;

            // Skin & Body
            const skinTone = document.getElementById('skinTone').value;
            const skinTexture = document.getElementById('skinTexture').value;
            const bodyType = document.getElementById('bodyType').value;
            const height = document.getElementById('height').value;

            // Expression & Pose
            const expression = document.getElementById('expression').value;
            const pose = document.getElementById('modelPose').value;
            const headAngle = document.getElementById('headAngle').value;

            // Photography
            const cameraAngle = document.getElementById('cameraAngle').value;
            const shotType = document.getElementById('shotType').value;
            const lighting = document.getElementById('lighting').value;
            const bgStyle = document.getElementById('bgStyle').value;
            const quality = document.getElementById('imageQuality').value;

            // Additional
            const additional = document.getElementById('additionalDetails').value;

            // Accessory photography specific
            const isAccessoryValue = document.getElementById('isAccessoryModel').value;
            const isAccessory = isAccessoryValue === 'full-body' || isAccessoryValue === 'body-part';
            const isBodyPart = isAccessoryValue === 'body-part';
            const bodyPartType = document.getElementById('bodyPartType').value;
            const accessoryClothing = document.getElementById('accessoryClothingStyle').value;
            const accessoryFraming = document.getElementById('accessoryCameraFraming').value;
            const accessoryPose = document.getElementById('accessoryPose').value;

            // Underwear photography specific
            const isUnderwear = document.getElementById('isUnderwearModel').value === 'yes';
            const underwearTypeForModel = document.getElementById('underwearTypeForModel').value;
            const underwearTopClothing = document.getElementById('underwearTopClothing').value;
            const underwearBottomClothing = document.getElementById('underwearBottomClothing').value;
            const underwearFraming = document.getElementById('underwearCameraFraming').value;
            const underwearPose = document.getElementById('underwearPose').value;
            const underwearPhotoStyle = document.getElementById('underwearPhotoStyle').value;

            // Build comprehensive prompt
            let photoType = isAccessory ? 'accessory product' : (isUnderwear ? 'underwear product' : 'fashion');

            // SPECIAL HANDLING: Body-part models for accessory photography
            if (isBodyPart && bodyPartType) {
                return buildBodyPartPrompt(bodyPartType, gender, age, ethnicity, skinTone, skinTexture, quality);
            }

            let prompt = `Professional ${quality} ${photoType} photograph of a ${age.replace('-', ' ')} ${ethnicity} ${gender} model. `;

            // For underwear models: HEADLESS/CROPPED (no face shown) for e-commerce focus
            if (!isUnderwear) {
                prompt += `Face: ${faceShape} face shape, ${eyeShape} ${eyeColor} eyes, ${eyebrows} eyebrows, ${noseType} nose, ${lipFullness} lips, ${cheekbones} cheekbones, ${jawline} jawline, ${chin} chin. `;

                prompt += `Hair: ${hairLength} ${hairTexture} ${hairColor} hair styled in ${hairstyle}. `;
                if (gender === 'male' && facialHair !== 'none') {
                    prompt += `${facialHair} facial hair. `;
                }
            } else {
                // Headless model for underwear photography
                prompt += `HEADLESS MODEL - face and head NOT SHOWN, cropped at neck level. E-commerce product photography style focusing only on body and garment. `;
            }

            prompt += `Skin: ${skinTone} skin tone, ${skinTexture}. `;
            prompt += `Body: ${bodyType} ${height} build. `;

            // CUSTOM CLOTHING: User-selected clothing for underwear models
            if (isUnderwear) {
                const topClothingDescriptions = {
                    'white-tank': 'wearing simple plain white tank top on upper body',
                    'black-tank': 'wearing simple plain black tank top on upper body',
                    'gray-tank': 'wearing simple plain gray tank top on upper body',
                    'white-sports-bra': 'wearing white sports bra on upper body',
                    'black-sports-bra': 'wearing black sports bra on upper body',
                    'nude-tank': 'wearing nude/beige tank top on upper body'
                };

                const bottomClothingDescriptions = {
                    'black-shorts': 'wearing black athletic shorts on lower body',
                    'white-shorts': 'wearing white athletic shorts on lower body',
                    'gray-shorts': 'wearing gray athletic shorts on lower body',
                    'black-athletic-shorts': 'wearing short black athletic shorts on lower body',
                    'nude-shorts': 'wearing nude/beige shorts on lower body'
                };

                let clothingParts = [];

                if (underwearTopClothing && topClothingDescriptions[underwearTopClothing]) {
                    clothingParts.push(topClothingDescriptions[underwearTopClothing]);
                }

                if (underwearBottomClothing && bottomClothingDescriptions[underwearBottomClothing]) {
                    clothingParts.push(bottomClothingDescriptions[underwearBottomClothing]);
                }

                if (clothingParts.length > 0) {
                    prompt += `Clothing: ${clothingParts.join(', ')}. `;
                    prompt += `IMPORTANT: Model prepared for underwear product photography - selected garments allow product placement. `;
                } else {
                    prompt += `IMPORTANT: Minimal coverage model for underwear product photography. `;
                }
            }

            // Accessory-specific clothing and framing
            if (isAccessory && accessoryClothing) {
                const clothingDescriptions = {
                    'simple-white-tshirt': 'wearing simple plain white t-shirt',
                    'black-turtleneck': 'wearing black turtleneck sweater',
                    'beige-blazer': 'wearing beige classic blazer',
                    'gray-sweater': 'wearing gray plain sweater',
                    'minimal-dress': 'wearing minimal simple dress',
                    'plain-white-shirt': 'wearing plain white button-up shirt',
                    'navy-cardigan': 'wearing navy blue cardigan',
                    'cream-blouse': 'wearing cream-colored blouse',
                    'black-v-neck': 'wearing black V-neck t-shirt',
                    'neutral-tank-top': 'wearing neutral-colored tank top'
                };
                prompt += `Clothing: ${clothingDescriptions[accessoryClothing] || accessoryClothing}. `;
                prompt += `IMPORTANT: Simple, solid-color, minimal clothing to NOT distract from accessories. `;
            }

            // Pose handling (accessory, underwear, or regular)
            if (isAccessory && accessoryPose) {
                prompt += `Pose: ${accessoryPose.replace('-', ' ')} pose. `;
            } else if (isUnderwear && underwearPose) {
                prompt += `Pose: ${underwearPose.replace('-', ' ')} pose. `;
            } else {
                prompt += `Pose: ${pose.replace('-', ' ')} pose, head ${headAngle.replace('-', ' ')}. `;
            }

            prompt += `Expression: ${expression.replace('-', ' ')} expression. `;

            // Camera framing (accessory, underwear, or regular)
            if (isAccessory && accessoryFraming) {
                const framingDescriptions = {
                    'upper-body': 'upper body shot focusing on face, neck, and shoulders area - perfect for jewelry, glasses, hats',
                    'three-quarter': 'three-quarter body shot showing torso and upper legs - ideal for bags, belts',
                    'hands-focus': 'shot with clear focus on hands and wrists - perfect for watches, rings, bracelets',
                    'face-neck-focus': 'close-up focusing on face and neck area - ideal for earrings, necklaces'
                };
                prompt += `Camera Framing: ${framingDescriptions[accessoryFraming] || accessoryFraming}. `;
            } else if (isUnderwear && underwearFraming) {
                const underwearFramingDescriptions = {
                    'upper-body': 'upper body shot - professional, tasteful',
                    'three-quarter': 'three-quarter body shot - clean, respectful framing',
                    'full-body': 'full body shot - professional product photography',
                    'torso-focus': 'torso-focused shot - appropriate retail catalog style'
                };
                prompt += `Camera Framing: ${underwearFramingDescriptions[underwearFraming] || underwearFraming}. `;
            } else {
                prompt += `Photography: ${shotType.replace('-', ' ')} shot from ${cameraAngle.replace('-', ' ')} angle, ${lighting} lighting, ${bgStyle.replace('-', ' ')} background. `;
            }

            // Special instructions for product photography
            if (isAccessory) {
                prompt += `ACCESSORY PRODUCT PHOTOGRAPHY: Model is styled specifically for showcasing accessories. Clean background, professional lighting, model pose and framing optimized to display accessories clearly. The model complements the accessory, not competes with it. `;
            }

            if (isUnderwear) {
                const photoStyleDescriptions = {
                    'clean-minimal': 'Clean, minimal aesthetic - simple and professional',
                    'retail-catalog': 'Retail catalog style - appropriate, professional product photography',
                    'professional-studio': 'Professional studio photography - high-end, tasteful',
                    'elegant-tasteful': 'Elegant and tasteful approach - sophisticated, respectful'
                };
                prompt += `UNDERWEAR PRODUCT PHOTOGRAPHY: ${photoStyleDescriptions[underwearPhotoStyle] || underwearPhotoStyle}. Model is styled for professional, tasteful underwear product photography similar to high-end retail catalogs. Clean background, professional lighting, APPROPRIATE and RESPECTFUL framing and composition. The model showcases the product professionally - NEVER overtly sexual or inappropriate. `;
            }

            const finalPhotoType = isAccessory ? 'product' : (isUnderwear ? 'product' : 'fashion');
            prompt += `Professional ${finalPhotoType} photography, high-end editorial quality, sharp focus, perfect lighting, detailed features, photorealistic, 8K resolution. `;

            if (additional) {
                prompt += additional + ' ';
            }

            return prompt;
        }

        async function saveModel() {
            if (!generatedImageData || !selectedUserId) {
                showNotification('Missing required data', 'error');
                return;
            }

            try {
                const response = await fetchWithAuth('/api/admin/save-generated-to-user', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        imageUrl: generatedImageData.imageUrl,
                        user_id: selectedUserId,
                        content_type: 'model',
                        visibility: document.getElementById('saveVisibility').value,
                        category: document.getElementById('saveCategory').value,
                        name: document.getElementById('saveName').value || 'AI Generated Model',
                        description: `AI Generated Model: ${generatedImageData.prompt}`,
                        prompt: generatedImageData.prompt
                    })
                });

                const data = await response.json();

                if (data.success) {
                    showNotification('ูุฏู ุฏุฑ ูุญุชูุง ฺฉุงุฑุจุฑ ุฐุฎุฑู ุดุฏ!', 'success');
                    discardModel();
                } else {
                    throw new Error(data.error || 'Save failed');
                }
            } catch (error) {
                console.error('Save error:', error);
                showNotification('ุฎุทุง ุฏุฑ ุฐุฎุฑู ูุฏู: ' + error.message, 'error');
            }
        }

        function discardModel() {
            generatedImageData = null;
            document.getElementById('previewSection').style.display = 'none';
            document.getElementById('saveName').value = '';
        }

        // Load users on page load
        loadUsers();
    </script>
</body>
</html>
